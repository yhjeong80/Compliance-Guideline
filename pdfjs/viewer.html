<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- üîπ Allow pinch-zoom -->
  <meta name="viewport"
        content="width=device-width,initial-scale=1,maximum-scale=5,user-scalable=yes">

  <!-- üî• Google Analytics 4 (GA4) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-YSLLZEP6QN"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}

    // üîπ PDF ÌååÏùºÎ™Ö Í∏∞Ï§Ä GA4 page_title ÏÑ§Ï†ï
    (function () {
      try {
        const params = new URLSearchParams(window.location.search);
        const file = params.get("file") || "";
        let title = "PDF Viewer";

        if (file.includes("US-Biztrip-Guideline-KO")) {
          title = "US Biztrip Compliance Guideline ‚Äì KO ‚Äì PDF Viewer";
        } else if (file.includes("US-Biztrip-Guideline-EN")) {
          title = "US Biztrip Compliance Guideline ‚Äì EN ‚Äì PDF Viewer";
        } else if (file.includes("US-Biztrip-Checklist-KO")) {
          title = "US Biztrip Checklist ‚Äì KO ‚Äì PDF Viewer";
        } else if (file.includes("US-Biztrip-Checklist-EN")) {
          title = "US Biztrip Checklist ‚Äì EN ‚Äì PDF Viewer";
        } else if (file.includes("US-Biztrip-Summary-KO")) {
          title = "US Biztrip Summary ‚Äì KO ‚Äì PDF Viewer";
        } else if (file.includes("US-Biztrip-Summary-EN")) {
          title = "US Biztrip Summary ‚Äì EN ‚Äì PDF Viewer";
        }

        document.title = title;
      } catch (e) {
        console.error(e);
      }
    })();

    gtag('js', new Date());
    gtag('config', 'G-YSLLZEP6QN');
  </script>

  <title>PDF Viewer</title>
  <link rel="stylesheet" href="viewer.css">

  <!-- üîπ HOME Î≤ÑÌäº & Î™®Î∞îÏùº Ï†úÏä§Ï≤ò -->
  <style>
    .toolbar .home-link {
      margin-right: 8px;
      padding: 4px 10px;
      border-radius: 4px;
      background: #2563eb;
      color: #fff;
      text-decoration: none;
      font-size: 14px;
      font-weight: 500;
      display: inline-block;
    }

    #viewer-wrap,
    #pdf-render {
      touch-action: pinch-zoom;
    }

    @media (pointer: coarse) {
      #zoom-out,
      #zoom-in,
      #fit-width,
      #zoom {
        display: none;
      }
    }
  </style>

  <!-- PDF.js -->
  <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.min.js"></script>
  <script>
    pdfjsLib.GlobalWorkerOptions.workerSrc =
      "https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.worker.min.js";
  </script>
</head>

<body>
  <div class="toolbar">
    <!-- üîπ HOME / BACK Î≤ÑÌäº -->
    <a id="homeBtn" href="../index.html" class="home-link">‚Üê HOME</a>

    <button id="prev">‚óÄ</button>
    <span>
      Page <input id="page-num" type="number" min="1" value="1">
      / <span id="page-count">1</span>
    </span>
    <button id="next">‚ñ∂</button>

    <span class="spacer"></span>

    <button id="zoom-out">Ôºç</button>
    <span id="zoom">100%</span>
    <button id="zoom-in">Ôºã</button>
    <button id="fit-width">Fit to Width</button>
  </div>

  <div id="viewer-wrap">
    <canvas id="pdf-render"></canvas>
  </div>

  <!-- ‚úÖ return ÌååÎùºÎØ∏ÌÑ∞ Í∏∞Î∞ò HOME Ïù¥Îèô -->
  <script>
    (function () {
      try {
        const params = new URLSearchParams(window.location.search);
        const ret = params.get("return"); // ../index.html%23contract-view
        const homeBtn = document.getElementById("homeBtn");

        if (!homeBtn) return;

        homeBtn.href = ret
          ? decodeURIComponent(ret)
          : "../index.html";
      } catch (e) {
        console.error(e);
      }
    })();
  </script>

  <script src="app.js"></script>
</body>
</html>
